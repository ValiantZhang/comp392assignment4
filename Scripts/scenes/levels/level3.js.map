{"version":3,"sources":["scenes/levels/level3.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;;;AAGF;;;;GAIG;AACH,IAAO,MAAM,CAymBZ;AAzmBD,WAAO,MAAM,EAAC,CAAC;IACX;;;;;OAKG;IACH;QAA4B,0BAAY;QAkDpC;;WAEG;QACH;YACI,iBAAO,CAAC;YAhBJ,YAAO,GAAoB,IAAI,OAAO,CAAC,OAAO,EAAE,CAAC;YAEjD,kBAAa,GAAS,IAAI,CAAC,CAAC,kCAAkC;YAC9D,8BAAyB,GAAW,KAAK,CAAC;YAc9C,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,KAAK,EAAE,CAAC;QACjB,CAAC;QAED,6DAA6D;QAE7D;;;;;WAKG;QACK,6BAAY,GAApB;YACI,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC7D,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;YACvE,MAAM,CAAC,KAAK,CAAC,eAAe,GAAG,SAAS,CAAC;QAC7C,CAAC;QAED;;;;;WAKG;QACK,4BAAW,GAAnB;YACI,yBAAyB;YACzB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YAClD,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAC5D,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;YAErC,8BAA8B;YAC9B,IAAI,CAAC,YAAY,EAAE,CAAC;YAIpB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAClB,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YACxC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAErC,iCAAiC;YACjC,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;YAEzB,4BAA4B;YAC5B,IAAI,CAAC,gBAAgB,GAAG,IAAI,OAAO,CAAC,gBAAgB,EAAE,CAAC;YACvD,IAAI,CAAC,aAAa,GAAG,IAAI,OAAO,CAAC,aAAa,EAAE,CAAC;QACrD,CAAC;QACD;;;;;WAKG;QACK,gCAAe,GAAvB;YACI,qCAAqC;YACrC,UAAU,GAAG,CAAC,CAAC;YACf,UAAU,GAAG,CAAC,CAAC;YAEf,kBAAkB;YAClB,UAAU,GAAG,IAAI,QAAQ,CAAC,IAAI,CAC1B,SAAS,GAAG,UAAU,EACtB,eAAe,EACf,SAAS,CACZ,CAAC;YACF,UAAU,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;YACzC,UAAU,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;YACpD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAEhC,kBAAkB;YAClB,UAAU,GAAG,IAAI,QAAQ,CAAC,IAAI,CAC1B,SAAS,GAAG,UAAU,EACtB,eAAe,EACf,SAAS,CACZ,CAAC;YACF,UAAU,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;YACzC,UAAU,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;YACpD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAEhC,SAAS,GAAG,IAAI,QAAQ,CAAC,IAAI,CACzB,cAAc,GAAG,IAAI,CAAC,aAAa,EACnC,eAAe,EACf,SAAS,CACZ,CAAC;YACF,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;YACzC,SAAS,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;YACnD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACnC,CAAC;QAED;;;;;WAKG;QACK,oCAAmB,GAA3B;YACI,oBAAoB;YACpB,IAAI,CAAC,cAAc,GAAG,IAAI,gBAAgB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YAC1D,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC;YACtC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACjD,IAAI,CAAC,cAAc,CAAC,gBAAgB,GAAG,CAAC,CAAC;YACzC,IAAI,CAAC,cAAc,CAAC,eAAe,GAAG,GAAG,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,iBAAiB,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,eAAe,GAAG,CAAC,CAAC;YACxC,IAAI,CAAC,cAAc,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,cAAc,GAAG,IAAI,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,eAAe,GAAG,IAAI,CAAC;YAC3C,IAAI,CAAC,cAAc,CAAC,cAAc,GAAG,GAAG,CAAC;YACzC,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,mBAAmB,CAAC;YAC/C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAClC,CAAC;QAED;;;;;WAKG;QACK,gCAAe,GAAvB;YACI,gBAAgB;YAChB,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC/C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAChC,CAAC;QAED;;;;;WAKG;QACK,0BAAS,GAAjB;YACI,IAAI,CAAC,cAAc,GAAG,IAAI,aAAa,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;YAC7D,IAAI,CAAC,cAAc,GAAG,IAAI,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;YACnD,IAAI,CAAC,qBAAqB,GAAG,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACnF,IAAI,CAAC,MAAM,GAAG,IAAI,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1B,CAAC;QAED;;;;;WAKG;QACK,0BAAS,GAAjB;YAEI,gBAAgB;YAChB,IAAI,CAAC,cAAc,GAAG,IAAI,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,cAAc,GAAG,IAAI,eAAe,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;YAE/D,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACvE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC;YAC5B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEtB,IAAI,CAAC,qBAAqB,GAAG,IAAI,iBAAiB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;YACxE,IAAI,CAAC,qBAAqB,GAAG,IAAI,QAAQ,EAAE,CAAC;YAC5C,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc;YAC9E,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,kBAAkB;YACpF,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;YACtF,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACxC,CAAC;QAED;;;;;WAKG;QACK,2BAAU,GAAlB;YACI,gBAAgB;YAChB,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;YAC/F,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,KAAK,CAAC,cAAc,CAAC;YACjD,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,KAAK,CAAC,cAAc,CAAC;YACjD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAErC,IAAI,CAAC,eAAe,GAAG,IAAI,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACrD,IAAI,CAAC,eAAe,GAAG,IAAI,aAAa,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAC,CAAC,CAAC;YAC/D,IAAI,CAAC,eAAe,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC;YAC/C,IAAI,CAAC,eAAe,CAAC,WAAW,GAAG,IAAI,CAAC;YACxC,IAAI,CAAC,eAAe,CAAC,OAAO,GAAG,CAAC,CAAC;YACjC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YACpE,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,SAAS,CAAC;YAC9B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC;QAC7C,CAAC;QAEM,kCAAiB,GAAzB,UAA0B,CAAQ,EAAE,CAAQ,EAAE,CAAQ;YACjD,IAAI,OAAwB,CAAC;YAC7B,IAAI,QAA0B,CAAC;YAC/B,IAAI,QAAyB,CAAC;YAE9B,OAAO,GAAG,IAAI,OAAO,CAAC,OAAO,CAAE,IAAI,KAAK,CAAC,YAAY,CAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAE,EAAE,IAAI,KAAK,CAAC,iBAAiB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACnI,OAAO,CAAC,IAAI,GAAG,cAAc,CAAC;YAC9B,QAAQ,GAAI,IAAI,OAAO,CAAC,OAAO,CAAE,IAAI,KAAK,CAAC,YAAY,CAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAE,EAAE,IAAI,KAAK,CAAC,iBAAiB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACrI,QAAQ,CAAC,IAAI,GAAG,eAAe,CAAC;YAChC,QAAQ,GAAE,IAAI,OAAO,CAAC,OAAO,CAAE,IAAI,KAAK,CAAC,YAAY,CAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAE,EAAE,IAAI,KAAK,CAAC,iBAAiB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACnI,QAAQ,CAAC,IAAI,GAAG,eAAe,CAAC;YAGhC,UAAU;YACV,IAAI,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YAC/C,IAAI,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,IAAI,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YACrD,IAAI,CAAC,WAAW,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,IAAI,EAAC,CAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YACxD,WAAW;YACX,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YAChD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,IAAI,EAAC,GAAG,EAAC,GAAG,EAAC,IAAI,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YACvD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,IAAI,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YACtD,WAAW;YACX,IAAI,CAAC,WAAW,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,CAAC,EAAE,EAAC,QAAQ,CAAC,CAAC;YACpD,sBAAsB;YACtB,IAAI,CAAC,WAAW,CAAC,GAAG,EAAC,CAAC,IAAI,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,IAAI,EAAC,QAAQ,CAAC,CAAC;YACtD,IAAI,CAAC,WAAW,CAAC,GAAG,EAAC,CAAC,IAAI,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,IAAI,EAAC,QAAQ,EAAC,QAAQ,CAAC,CAAC,CAAA,QAAQ;YAC3E,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAC,GAAG,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,GAAG,CAAC,CAAC;YACvC,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAC,GAAG,GAAE,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;YACvC,sBAAsB;YAEtB,WAAW;YACX,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,EAAC,CAAC,IAAI,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,IAAI,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YACzD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,IAAI,EAAC,QAAQ,CAAC,CAAC;YACpD,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,IAAI,EAAC,QAAQ,CAAC,CAAC;YACtD,kBAAkB;YAClB,IAAI,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,CAAC,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YAChD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,IAAI,CAAC,CAAC,CAAA,aAAa;YACnD,IAAI,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YAClD,IAAI,CAAC,WAAW,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YACpD,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,EAAC,CAAC,IAAI,EAAC,EAAE,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,CAAC,EAAC,QAAQ,CAAC,CAAC;YAEvD,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACnB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAA,OAAO;YACjC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtB,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACvB,CAAC;QAEQ,8BAAa,GAArB;YACG,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAEhB,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAE,CAAC,CAAC;YACjC,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAE,CAAC,CAAC;YAChC,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAE,CAAC,CAAC;QAGlC,CAAC;QAEM,4BAAW,GAAnB,UAAoB,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EACrD,UAAiB,EAAC,QAAiB,EAAC,IAA2B;YAA3B,oBAA2B,GAA3B,oBAA2B;YAC/E,IAAI,YAAY,GAAG,IAAI,eAAe,CAAC,EAAC,KAAK,EAAC,QAAQ,EAAC,CAAC,CAAC;YACzD,IAAI,gBAAgB,GAAG,OAAO,CAAC,cAAc,CAAC,YAAY,EAAC,EAAE,EAAC,EAAE,CAAC,CAAA;YACjE,IAAI,YAAY,GAAG,IAAI,WAAW,CAAC,CAAC,GAAC,GAAG,EAAC,CAAC,GAAC,GAAG,EAAC,CAAC,GAAC,GAAG,CAAC,CAAC;YACtD,IAAI,QAAQ,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,YAAY,EAAC,YAAY,EAAC,CAAC,CAAC,CAAC;YAChE,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;YACrB,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;YAC7B,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAC,CAAC,UAAU,GAAE,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;YAC/C,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;YAC3B,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;YAC9B,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC3B,CAAC;QAED;;;;;WAKG;QACH,kCAAiB,GAAjB,UAAkB,KAAK;YACnB,0CAA0C;YAC1C,EAAE,CAAC,CAAC,QAAQ,CAAC,kBAAkB,KAAK,IAAI,CAAC,OAAO;gBAC5C,QAAQ,CAAC,qBAAqB,KAAK,IAAI,CAAC,OAAO;gBAC/C,QAAQ,CAAC,wBAAwB,KAAK,IAAI,CAAC,OAAO,CAAC,CAAA,CAAC;gBACpD,yCAAyC;gBACzC,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,IAAI,CAAC;gBACrC,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC;gBAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YACxC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,0CAA0C;gBAC1C,EAAE,CAAC,CAAC,YAAY,IAAI,CAAC,IAAI,YAAY,IAAI,CAAC,CAAC,CAAC,CAAC;oBACzC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBACpC,QAAQ,CAAC,mBAAmB,CAAC,mBAAmB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;oBAC5F,QAAQ,CAAC,mBAAmB,CAAC,sBAAsB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;oBAC/F,QAAQ,CAAC,mBAAmB,CAAC,yBAAyB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;oBAClG,QAAQ,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;oBAC1F,QAAQ,CAAC,mBAAmB,CAAC,qBAAqB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;oBAC7F,QAAQ,CAAC,mBAAmB,CAAC,wBAAwB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;gBACpG,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACR,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,aAAa,CAAC;oBAC3C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC;oBACxC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;oBACnC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;gBACrC,CAAC;gBACD,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,KAAK,CAAC;gBACtC,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;YACvC,CAAC;QACL,CAAC;QAED;;;;;WAKG;QACK,iCAAgB,GAAxB,UAAyB,KAAK;YAC1B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;QACzC,CAAC;QAED;;;;;WAKG;QACK,4BAAW,GAAnB;YACK,EAAE,CAAC,CAAC,WAAW,GAAG,EAAE,CAAC,CAAC,CAAC;gBAAC,WAAW,GAAG,EAAE,CAAA;YAAC,CAAC;YAAA,CAAC;YAE3C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC,CAAC;gBACvC,EAAE,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC;oBACnB,kBAAkB,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;gBACtC,CAAC;gBACD,IAAI,CAAC,CAAC;oBACF,kBAAkB,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;gBACtC,CAAC;YACL,CAAC;QACL,CAAC;QACF;;;;;;WAMG;QACK,6BAAY,GAApB,UAAqB,WAAmB,EAAE,WAAmB,EAAE,SAAiB;YAC3E,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAA,CAAC;gBACjB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAC5G,IAAI,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;YAC9C,CAAC;QACL,CAAC;QAEF,0BAA0B;QAC1B;;;;;WAKG;QACK,8BAAa,GAArB;YACI,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC;gBAEhC,gCAAgC;gBAChC,IAAI,IAAI,GAAW,WAAW,CAAC,GAAG,EAAE,CAAC;gBACrC,IAAI,KAAK,GAAW,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;gBAElD,WAAW;gBACV,EAAE,CAAA,CAAC,UAAU,IAAE,CAAC,CAAC;oBACd,MAAM,CAAC;gBACX,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAA,CAAC;oBAC9B,WAAW,IAAI,CAAC,GAAG,KAAK,CAAC;oBACzB,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAClC,CAAC;gBACD,IAAI,CAAC,EAAE,CAAA,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,UAAU,GAAG,CAAC,CAAC,CAAA,CAAC;oBACpE,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAC5E,UAAU,EAAE,CAAC;oBACb,UAAU,CAAC,IAAI,GAAG,SAAS,GAAG,UAAU,CAAC;oBACzC,WAAW,GAAG,CAAC,CAAC;gBACxB,CAAC;gBAED,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,qBAAqB;gBACrB,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC;gBAC7B,IAAI,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC,CAAC;gBAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACzB,CAAC;QACL,CAAC;QACO,iCAAgB,GAAxB;YAAA,iBA0CC;YAzCG,EAAE,CAAC,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAA,CAAC;gBACpD,IAAI,CAAC,yBAAyB,GAAC,IAAI,CAAC;gBACpC,UAAU,CAAC;oBAEN,UAAU,CAAC;wBACN,EAAE,CAAC,CAAC,UAAU,GAAG,KAAI,CAAC,aAAa,CAAC,CAAA,CAAC;4BACvC,oBAAoB;4BACpB,QAAQ,CAAC,eAAe,EAAE,CAAC;4BAE3B,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC,yBAAyB;4BAC7C,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BAE3B,2BAA2B;4BAC3B,SAAS,CAAC,IAAI,GAAG,4BAA4B,CAAC;4BAC9C,eAAe,GAAC,CAAC,CAAC;4BAClB,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;4BACjC,WAAW,EAAE,CAAC;wBAClB,CAAC;wBACD,IAAI,CAAA,CAAC;4BACD,QAAQ,CAAC,eAAe,EAAE,CAAC;4BAC3B,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC,yBAAyB;4BAC7C,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BAE3B,kBAAkB;4BAClB,SAAS,CAAC,IAAI,GAAG,UAAU,CAAC;4BAC5B,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;4BACjC,sCAAsC;4BACtC,WAAW,EAAE,CAAC;wBAClB,CAAC;oBAEA,CAAC,EAAC,IAAI,CAAC,CAAC;oBAET,EAAE,CAAC,CAAC,UAAU,GAAG,KAAI,CAAC,aAAa,CAAC,CAAA,CAAC;wBAClC,SAAS,CAAC,IAAI,GAAG,4BAA4B,CAAC;oBAEjD,CAAC;oBACD,IAAI,CAAA,CAAC;wBACD,SAAS,CAAC,IAAI,GAAG,UAAU,CAAC;oBAChC,CAAC;gBACL,CAAC,EAAE,IAAI,CAAC,CAAC;YACb,CAAC;QACL,CAAC;QAED,6DAA6D;QAC7D;;;;WAIG;QACI,sBAAK,GAAZ;YAAA,iBAqDC;YApDG,IAAI,IAAI,GAAG,IAAI,CAAC;YAEhB,oBAAoB;YACpB,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,0CAA0C;YAC1C,IAAI,CAAC,eAAe,GAAG,oBAAoB,IAAI,QAAQ;gBACnD,uBAAuB,IAAI,QAAQ;gBACnC,0BAA0B,IAAI,QAAQ,CAAC;YAE3C,sCAAsC;YACtC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE;oBACxC,gCAAgC;oBAChC,KAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,KAAI,CAAC,OAAO,CAAC,kBAAkB;wBAC7D,KAAI,CAAC,OAAO,CAAC,qBAAqB;wBAClC,KAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;gBACtC,CAAC,CAAC,CAAC;gBAEH,QAAQ,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;gBACzF,QAAQ,CAAC,gBAAgB,CAAC,sBAAsB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;gBAC5F,QAAQ,CAAC,gBAAgB,CAAC,yBAAyB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;gBAC/F,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;gBACvF,QAAQ,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;gBAC1F,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC;YACjG,CAAC;YAED,4BAA4B;YAC5B,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC;YACnB,IAAI,CAAC,GAAG,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;YAE9C,iCAAiC;YACjC,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,qCAAqC;YACrC,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAE3B,gBAAgB;YAChB,IAAI,CAAC,SAAS,EAAE,CAAC;YAEjB,wBAAwB;YACxB,IAAI,CAAC,SAAS,EAAE,CAAC;YAEjB,0DAA0D;YAC1D,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAExB,kBAAkB;YAClB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,aAAa,EAAE,CAAC;QACzB,CAAC;QAED;;;;;WAKG;QACK,2BAAU,GAAlB;YACI,IAAI,MAAM,GAAW,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAC7C,IAAI,KAAK,GAAW,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;YAC7C,IAAI,OAAO,GAAW,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAC9C,IAAI,MAAM,GAAW,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAE5C,IAAI,WAAW,GAAW,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;YACvE,IAAI,SAAS,GAAW,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC;YAEnE,mCAAmC;YACnC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;YACnE,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACnE,CAAC;QAED;;;WAGG;QAEK,+BAAc,GAAtB,UAAuB,CAAQ;YAC1B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAC,IAAI,GAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC;YAChE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,IAAI,CAAC;YACvC,wDAAwD;YACxD,0DAA0D;YAEzD,EAAE,CAAA,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,GAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAA,CAAC;gBAC5C,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;YAE3D,CAAC;YACD,EAAE,CAAA,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAA,CAAC;gBAC7C,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;YAC3D,CAAC;QAEL,CAAC;QAGM,uBAAM,GAAb;YACI,8CAA8C;YAC9C,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YACpB,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEhB,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QAG3B,CAAC;QAED;;;;;WAKG;QACI,uBAAM,GAAb;YACI,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;YAC5B,UAAU,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;YACzC,UAAU,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;YACpD,UAAU,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;YACzC,UAAU,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;YACpD,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;QACL,aAAC;IAAD,CAjmBA,AAimBC,CAjmB2B,MAAM,CAAC,KAAK,GAimBvC;IAjmBY,aAAM,SAimBlB,CAAA;AACL,CAAC,EAzmBM,MAAM,KAAN,MAAM,QAymBZ","file":"scenes/levels/level3.js","sourcesContent":["/*\nAuthor:             Josh Bender, Jacky Zhang, Ilmir Taychinov\nLast Modified:      19/04/2016\nDescription:        Level 3 Scene\nRevision History:   Live build - Part 4 (final)\n*/\n\n\n/**\n * The Scenes module is a namespace to reference all scene objects\n * \n * @module scenes\n */\nmodule scenes {\n    /**\n     * The Play class is where the main action occurs for the game\n     * \n     * @class Level3\n     * @param havePointerLock {boolean}\n     */\n    export class Level3 extends scenes.Scene {\n        private havePointerLock: boolean;\n        private element: any;\n\n        private blocker: HTMLElement;\n        private instructions: HTMLElement;\n        private directionLight: DirectionalLight;\n        private ambientLight: AmbientLight;\n        private groundGeometry: CubeGeometry;\n        private groundPhysicsMaterial: Physijs.Material;\n        private groundMaterial: PhongMaterial;\n        private ground: Physijs.Mesh;\n        private groundTexture: Texture;\n        private groundTextureNormal: Texture;\n        private reticleGeometry: PlaneGeometry;\n        private reticleMaterial: PhongMaterial;\n        private reticleTexture: Texture;\n        private reticle: Mesh;\n        private playerGeometry: CubeGeometry;\n        private playerMaterial: Material;\n        private player: Mesh;\n        private keyboardControls: objects.KeyboardControls;\n        private mouseControls: objects.MouseControls;\n        private isGrounded: boolean;\n        private deathPlaneGeometry: CubeGeometry;\n        private deathPlaneMaterial: Physijs.Material;\n        private deathPlane: Physijs.Mesh;\n        \n        private directionLineMaterial: LineBasicMaterial;\n        private directionLineGeometry: Geometry;\n        private directionLine: Line;\n\n        private velocity: Vector3;\n        private prevTime: number;\n        private clock: Clock;\n\n        private stage: createjs.Stage;\n        public scoreValue: number;\n        private creator :builder.Creator = new builder.Creator();\n        \n        private scoreRequired:number =7500; //Score required to pass the level\n        private levelTransitionInProgress:boolean = false;\n        private hands: Physijs.Mesh[];  \n      \n        \n        \n     \n        private rotationDirections:number[];\n\n        \n        /**\n         * @constructor\n         */\n        constructor() {\n            super();\n            this._initialize();\n            this.start();\n        }\n\n        // PRIVATE METHODS ++++++++++++++++++++++++++++++++++++++++++\n\n        /**\n         * Sets up the initial canvas for the play scene\n         * \n         * @method setupCanvas\n         * @return void\n         */\n        private _setupCanvas(): void {\n            canvas.setAttribute(\"width\", config.Screen.WIDTH.toString());\n            canvas.setAttribute(\"height\", (config.Screen.HEIGHT * 0.1).toString());\n            canvas.style.backgroundColor = \"#000000\";\n        }\n\n        /**\n         * The initialize method sets up key objects to be used in the scene\n         * \n         * @method _initialize\n         * @returns void\n         */\n        private _initialize(): void {\n            // Create to HTMLElements\n            this.blocker = document.getElementById(\"blocker\");\n            this.instructions = document.getElementById(\"instructions\");\n            this.blocker.style.display = \"block\";\n\n            // setup canvas for menu scene\n            this._setupCanvas();\n            \n            \n           \n            this.prevTime = 0;\n            this.stage = new createjs.Stage(canvas);\n            this.velocity = new Vector3(0, 0, 0);\n            \n            // setup a THREE.JS Clock objectg\n            this.clock = new Clock();\n\n            // Instantiate Game Controls\n            this.keyboardControls = new objects.KeyboardControls();\n            this.mouseControls = new objects.MouseControls();\n        }\n        /**\n         * This method sets up the scoreboard for the scene\n         * \n         * @method setupScoreboard\n         * @returns void\n         */\n        private setupScoreboard(): void {\n            // initialize  score and shots values\n            scoreValue = 0;\n            shotsValue = 3;\n\n            // Add shots Label\n            shotsLabel = new createjs.Text(\n                \"Shots: \" + shotsValue,\n                \"40px Consolas\",\n                \"#ffffff\"\n            );\n            shotsLabel.x = config.Screen.WIDTH * 0.1;\n            shotsLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.addChild(shotsLabel);\n\n            // Add Score Label\n            scoreLabel = new createjs.Text(\n                \"Score: \" + scoreValue,\n                \"40px Consolas\",\n                \"#ffffff\"\n            );\n            scoreLabel.x = config.Screen.WIDTH * 0.8;\n            scoreLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.addChild(scoreLabel);\n            \n            levelGoal = new createjs.Text(\n                \"Level goal: \" + this.scoreRequired,\n                \"40px Consolas\",\n                \"#ffffff\"\n            );\n            levelGoal.x = config.Screen.WIDTH * 0.35;\n            levelGoal.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.addChild(levelGoal);\n        }\n\n        /**\n         * Add a directional light to the scene\n         * \n         * @method addDirectionalLight\n         * @return void\n         */\n        private addDirectionalLight(): void {\n            // Directional Light\n            this.directionLight = new DirectionalLight(0xffffff, 1.2);\n            this.directionLight.position.set(5, 40, 20);\n            this.directionLight.castShadow = true;\n            this.directionLight.lookAt(new Vector3(0, 0, 0));\n            this.directionLight.shadowCameraNear = 2;\n            this.directionLight.shadowCameraFar = 200;\n            this.directionLight.shadowCameraLeft = -5;\n            this.directionLight.shadowCameraRight = 5;\n            this.directionLight.shadowCameraTop = 5;\n            this.directionLight.shadowCameraBottom = -5;\n            this.directionLight.shadowMapWidth = 2048;\n            this.directionLight.shadowMapHeight = 2048;\n            this.directionLight.shadowDarkness = 0.5;\n            this.directionLight.name = \"Directional Light\";\n            this.add(this.directionLight);\n        }\n        \n        /**\n         * Add an ambient light to the scene\n         * \n         * @method addAmbientLight\n         * @return void\n         */\n        private addAmbientLight(): void{\n            // Ambient Light\n            this.ambientLight = new AmbientLight(0x303030);\n            this.add(this.ambientLight);\n        }\n\n        /**\n         * Add a ground plane to the scene\n         * \n         * @method addGround\n         * @return void\n         */\n        private addGround(): void {\n            this.groundMaterial = new PhongMaterial({ color: 0x00FF00 });\n            this.groundGeometry = new BoxGeometry(128, 1, 128);\n            this.groundPhysicsMaterial = Physijs.createMaterial(this.groundMaterial, 0.4, 0.1);\n            this.ground = new Physijs.ConvexMesh(this.groundGeometry, this.groundPhysicsMaterial, 0);\n            this.ground.receiveShadow = true;\n            this.ground.name = \"Ground\";\n            this.ground.position.set(0, -0.5, 0);\n            this.add(this.ground);\n        }\n\n        /**\n         * Adds the player controller to the scene\n         * \n         * @method addPlayer\n         * @return void\n         */\n        private addPlayer(): void {\n            \n            // Player Object\n            this.playerGeometry = new BoxGeometry(2, 4, 2);\n            this.playerMaterial = new LambertMaterial({ color: 0x00ff00 });\n\n            this.player = new THREE.Mesh(this.playerGeometry, this.playerMaterial);\n            this.player.position.set(0, 2, 10);\n            this.player.receiveShadow = true;\n            this.player.castShadow = true;\n            this.player.name = \"Player\";\n            this.add(this.player);\n            \n            this.directionLineMaterial = new LineBasicMaterial({ color: 0xBadBad });\n            this.directionLineGeometry = new Geometry();\n            this.directionLineGeometry.vertices.push(new Vector3(0, 0, 0)); // line origin\n            this.directionLineGeometry.vertices.push(new Vector3(0, 0, -50)); // end of the line\n            this.directionLine = new Line(this.directionLineGeometry, this.directionLineMaterial);\n            this.player.add(this.directionLine);\n        }\n\n        /**\n         * Adds the reticle to the camera\n         * \n         * @method addReticle\n         * @return void\n         */\n        private addReticle(): void {\n            //Reticle Object\n            this.reticleTexture = new THREE.TextureLoader().load('../../Assets/images/reticleTexture.png');\n            this.reticleTexture.wrapS = THREE.RepeatWrapping;\n            this.reticleTexture.wrapT = THREE.RepeatWrapping;\n            this.reticleTexture.repeat.set(1, 1);\n            \n            this.reticleGeometry = new PlaneGeometry(0.02, 0.02);\n            this.reticleMaterial = new PhongMaterial({emissive: 0xFFFFFF});\n            this.reticleMaterial.map = this.reticleTexture;\n            this.reticleMaterial.transparent = true;\n            this.reticleMaterial.opacity = 1;\n            this.reticle = new Mesh(this.reticleGeometry, this.reticleMaterial);\n            this.reticle.name = \"Reticle\";\n            camera.add(this.reticle);\n            this.reticle.position.set(0, 0.01, -0.2);\n        }\n       \n       private createCubeSoldier(x:number, y:number, z:number):void{\n            var cubeMan: Physijs.BoxMesh;\n            var cubeBody:  Physijs.BoxMesh;\n            var cubeHand: Physijs.BoxMesh;\n           \n            cubeMan = new Physijs.BoxMesh( new THREE.CubeGeometry( 0.001, 0.001, 0.001 ), new THREE.MeshBasicMaterial({ color: 0x888888 }) ,0);\n            cubeMan.name = \"WholeCubeMan\";\n            cubeBody =  new Physijs.BoxMesh( new THREE.CubeGeometry( 0.001, 0.001, 0.001 ), new THREE.MeshBasicMaterial({ color: 0x888888 }) ,0);\n            cubeBody.name = \"WholeCubeBody\";\n            cubeHand= new Physijs.BoxMesh( new THREE.CubeGeometry( 0.001, 0.001, 0.001 ), new THREE.MeshBasicMaterial({ color: 0x888888 }) ,0);\n            cubeHand.name = \"WholeCubeHand\";\n            \n            \n            //left leg\n            this.addBodyPart(1,0,0,0.3,0.7,0.2,0,cubeBody);\n            this.addBodyPart(1,-0.5,1.6,0.2,0.2,1.25,0,cubeBody);\n            this.addBodyPart(0.8,-0.5,4.2,0.2,0.2,1.25,-8,cubeBody);\n            //right leg\n            this.addBodyPart(-1,0,0,0.3,0.7,0.2,0,cubeBody);\n            this.addBodyPart(-1,-0.5,1.55,0.2,0.2,1.25,0,cubeBody);\n            this.addBodyPart(-1,-0.5,4.2,0.2,0.2,1.25,0,cubeBody);\n            //left hand\n            this.addBodyPart(1.8,-0.4,8,0.2,0.2,1,-60,cubeBody);\n            //hand - rotating part\n            this.addBodyPart(0.3,-0.34,1,0.2,0.2,1,13.6,cubeHand);\n            this.addBodyPart(0.8,-0.45,2.6,2.4,0.2,1.2,26.5,cubeHand,\"shield\");//SHIELD\n            cubeHand.position.set(x+2.5,y+7,z+2.5);\n            cubeHand.rotation.z=110 /180 * Math.PI;\n            //rotationDirection=1;\n            \n            //righ hand\n            this.addBodyPart(-3.3,-0.46,4.5,0.2,0.2,0.38,0,cubeBody);\n            this.addBodyPart(-3,-0.4,6,0.2,0.2,1,13.6,cubeBody);\n            this.addBodyPart(-2.1,-0.4,8,0.2,0.2,1,40.5,cubeBody);\n            //body, neck, head\n            this.addBodyPart(0,-0.3,5,1,0.4,0.2,0,cubeBody);\n            this.creator.createCube(x,6,z,1,this);//GOLDEN CUBE\n            this.addBodyPart(0,-0.3,8.5,1,0.4,0.2,0,cubeBody);\n            this.addBodyPart(0.0,-0.5,8.7,0.2,0.2,1,0,cubeBody);\n            this.addBodyPart(-0.1,-0.35,10,0.7,0.7,0.7,0,cubeBody);\n             \n            this.add(cubeHand);\n            this.hands.push(cubeHand);//her e\n            cubeMan.add(cubeBody);\n            cubeMan.position.set(x,y,z);\n            this.add(cubeMan);\n       }\n       \n        private generateLevel() : void{\n           this.rotationDirections = [1,1,1];\n           this.hands = [];\n           \n           this.createCubeSoldier(-7,0,-15);\n           this.createCubeSoldier(0,0,-15);\n           this.createCubeSoldier(7,0,-15);\n          \n           \n         }\n        \n        private addBodyPart(x:number,z:number,y:number,h:number,d:number,w:number,\n                            z_rotation:number,attachTo:Object3D,name:string = \"soldierPart\"):void{\n            var cubeMaterial = new LambertMaterial({color:0xFFffFF});\n            var cubePhysMaterial = Physijs.createMaterial(cubeMaterial,10,10)\n            var cubeGeometry = new BoxGeometry(h*1.8,w*1.8,d*1.8);\n            var thisCube = new Physijs.BoxMesh(cubeGeometry,cubeMaterial,0);\n            thisCube.name = name;\n            thisCube.position.set(x,y,z);\n            thisCube.rotation.z=-z_rotation /180 * Math.PI;\n            thisCube.castShadow = true;\n            thisCube.receiveShadow = true;\n            attachTo.add(thisCube);\n        }\n    \n        /**\n         * Event Handler method for any pointerLockChange events\n         * \n         * @method pointerLockChange\n         * @return void\n         */\n        pointerLockChange(event): void {\n            //OMIT TO REMOVE MOZ/WEBKIT SEMANTIC ERROR\n            if (document.pointerLockElement === this.element ||\n                document.mozPointerLockElement === this.element ||\n                document.webkitPointerLockElement === this.element){\n                // enable our mouse and keyboard controls\n                this.keyboardControls.enabled = true;\n                this.mouseControls.enabled = true;\n                this.blocker.style.display = 'none'; \n            } else {\n                // disable our mouse and keyboard controls\n                if (currentScene == 5 || currentScene == 0) {\n                    this.blocker.style.display = 'none';\n                    document.removeEventListener('pointerlockchange', this.pointerLockChange.bind(this), false);\n                    document.removeEventListener('mozpointerlockchange', this.pointerLockChange.bind(this), false);\n                    document.removeEventListener('webkitpointerlockchange', this.pointerLockChange.bind(this), false);\n                    document.removeEventListener('pointerlockerror', this.pointerLockError.bind(this), false);\n                    document.removeEventListener('mozpointerlockerror', this.pointerLockError.bind(this), false);\n                    document.removeEventListener('webkitpointerlockerror', this.pointerLockError.bind(this), false);\n                } else {\n                this.blocker.style.display = '-webkit-box';\n                this.blocker.style.display = '-moz-box';\n                this.blocker.style.display = 'box';\n                this.instructions.style.display = '';\n                }\n                this.keyboardControls.enabled = false;\n                this.mouseControls.enabled = false;\n            }\n        }\n\n        /**\n         * Event handler for PointerLockError\n         * \n         * @method pointerLockError\n         * @return void\n         */\n        private pointerLockError(event): void {\n            this.instructions.style.display = '';\n        }\n\n        /**\n         * This method checks the charge level and shows the appropriate textures\n         * \n         * @method checkCharge\n         * @return void\n         */\n        private checkCharge(): void{\n             if (chargePower > 12) { chargePower = 12 };\n             \n             for (var i = 2; i < chargeBar.length; i++){\n                 if (chargePower >= i) {\n                     chargeBarMaterials[i].opacity = 1;\n                 }\n                 else {\n                     chargeBarMaterials[i].opacity = 0;\n                 }\n             }\n         }\n        /**\n         * This method creates and launches a sphere projectile\n         *  Projectile is create at player position\n         * \n         * @method launchSphere\n         * @return void\n         */\n        private launchSphere(launchPower: number, launchAngle: number, launchYaw: number): void{\n             if (shotsValue > 0){\n                this.creator.createProjectile(this.player.position.x, this.player.position.y + 2, this.player.position.z - 2, \n                this, launchPower, launchAngle, launchYaw);\n             }\n         }\n\n        // Check Controls Function\n        /**\n         * This method updates the player's position based on user input\n         * \n         * @method checkControls\n         * @return void\n         */\n        private checkControls(): void {\n            if (this.keyboardControls.enabled) {\n                \n                //this.velocity = new Vector3();\n                var time: number = performance.now();\n                var delta: number = (time - this.prevTime) / 1000;\n                \n                //ChargeBar\n                 if(shotsValue==0)\n                    return;\n                if (this.keyboardControls.charge){\n                    chargePower += 5 * delta;\n                    createjs.Sound.play(\"charge\");\n                }\n                else if(chargePower > 1 && !this.keyboardControls.charge && shotsValue > 0){\n                        this.launchSphere(chargePower * 5000, camera.rotation.x, camera.rotation.y);\n                        shotsValue--;\n                        shotsLabel.text = \"Shots: \" + shotsValue;\n                        chargePower = 0;\n                }\n               \n                this.checkCharge();\n                this.cameraLook();\n                //reset Pitch and Yaw\n                this.mouseControls.pitch = 0;\n                this.mouseControls.yaw = 0;\n                this.prevTime = time;\n            } \n        }\n        private checkLevelChange():void{\n            if (shotsValue == 0 && !this.levelTransitionInProgress){\n                this.levelTransitionInProgress=true;\n                setTimeout(() => {\n                    \n                     setTimeout(() => {\n                          if (scoreValue < this.scoreRequired){\n                        // Exit Pointer Lock\n                        document.exitPointerLock();\n                        \n                        this.children = []; // an attempt to clean up\n                        this.player.remove(camera);\n            \n                        // Play the Game Over Scene\n                        levelGoal.text = \"Cubes dominated! try again\";\n                        lastPlayedScene=3;\n                        currentScene = config.Scene.OVER;\n                        changeScene();\n                    }\n                    else{\n                        document.exitPointerLock();\n                        this.children = []; // an attempt to clean up\n                        this.player.remove(camera);\n            \n                        //go to next level\n                        levelGoal.text = \"You won!\";\n                        currentScene = config.Scene.MENU;\n                        //this.blocker.style.display = \"none\";\n                        changeScene();\n                    }\n                         \n                     },2000);\n                    \n                    if (scoreValue < this.scoreRequired){\n                       levelGoal.text = \"Cubes dominated! try again\";\n                       \n                    }\n                    else{\n                        levelGoal.text = \"You won!\";\n                    }\n                }, 4000);\n            }\n        }\n\n        // PUBLIC METHODS +++++++++++++++++++++++++++++++++++++++++++\n        /**\n         * The start method is the main method for the scene class\n         * @method start\n         * @return void\n         */\n        public start(): void {\n            var self = this;\n\n            // Set Up Scoreboard\n            this.setupScoreboard();\n\n            //check to see if pointerlock is supported\n            this.havePointerLock = 'pointerLockElement' in document ||\n                'mozPointerLockElement' in document ||\n                'webkitPointerLockElement' in document;\n\n            // Check to see if we have pointerLock\n            if (this.havePointerLock) {\n                this.element = document.body;\n                this.instructions.addEventListener('click', () => {\n                    // Ask the user for pointer lock\n                    this.element.requestPointerLock = this.element.requestPointerLock ||\n                        this.element.mozRequestPointerLock ||\n                        this.element.webkitRequestPointerLock;\n                    this.element.requestPointerLock();\n                });\n\n                document.addEventListener('pointerlockchange', this.pointerLockChange.bind(this), false);\n                document.addEventListener('mozpointerlockchange', this.pointerLockChange.bind(this), false);\n                document.addEventListener('webkitpointerlockchange', this.pointerLockChange.bind(this), false);\n                document.addEventListener('pointerlockerror', this.pointerLockError.bind(this), false);\n                document.addEventListener('mozpointerlockerror', this.pointerLockError.bind(this), false);\n                document.addEventListener('webkitpointerlockerror', this.pointerLockError.bind(this), false);\n            }\n\n            // Scene changes for Physijs\n            this.name = \"Main\";\n            this.fog = new THREE.Fog(0xffffff, 0, 750);\n            this.setGravity(new THREE.Vector3(0, -20, 0));\n            \n            // Add Ambient Light to the scene\n            this.addAmbientLight();\n           \n            // Add Directional Light to the scene\n            this.addDirectionalLight();\n\n            // Ground Object\n            this.addGround();\n\n            // Add player controller\n            this.addPlayer();\n\n            // create parent-child relationship with camera and player\n            this.player.add(camera);\n            \n            // Add UI Elements\n            this.addReticle();\n            this.generateLevel();\n        }\n\n        /**\n         * Camera Look function\n         * \n         * @method cameraLook\n         * @return void\n         */\n        private cameraLook(): void {\n            var zenith: number = THREE.Math.degToRad(25);\n            var nadir: number = THREE.Math.degToRad(-25);\n            var zenith2: number = THREE.Math.degToRad(25);\n            var nadir2: number = THREE.Math.degToRad(0);\n\n            var cameraPitch: number = camera.rotation.x + this.mouseControls.pitch;\n            var cameraYaw: number = camera.rotation.y + this.mouseControls.yaw;\n\n            // Constrain the Camera Pitch & Yaw\n            camera.rotation.x = THREE.Math.clamp(cameraPitch, nadir2, zenith2);\n            camera.rotation.y = THREE.Math.clamp(cameraYaw, nadir, zenith);\n        }\n\n        /**\n         * @method update\n         * @returns void\n         */\n         \n        private handsContoller(h:number):void{\n             this.hands[h].rotation.z+=this.rotationDirections[h]*0.01*(1+h);\n             this.hands[h].__dirtyRotation = true;\n           // this.hands[h].setAngularFactor(new Vector3(0, 0, 0));\n           // this.hands[h].setAngularVelocity(new Vector3(0, 1, 0));\n          \n            if(this.hands[h].rotation.z < 30/180 * Math.PI){\n                this.rotationDirections[h]=-this.rotationDirections[h];\n                \n            }\n            if(this.hands[h].rotation.z > 180/180 * Math.PI){\n                this.rotationDirections[h]=-this.rotationDirections[h];\n            }\n            \n        }\n            \n         \n        public update(): void {\n            //player.setAngularFactor(new Vector3(0,0,0));\n            this.checkControls();\n            this.stage.update();\n            this.checkLevelChange();\n            this.simulate();\n           \n            this.handsContoller(0);\n            this.handsContoller(1);\n            this.handsContoller(2);\n           \n            \n        }\n\n        /**\n         * Responds to screen resizes\n         * \n         * @method resize\n         * @return void\n         */\n        public resize(): void {\n            canvas.style.width = \"100%\";\n            shotsLabel.x = config.Screen.WIDTH * 0.1;\n            shotsLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            scoreLabel.x = config.Screen.WIDTH * 0.8;\n            scoreLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.update();\n        }\n    }\n}"],"sourceRoot":"/source/"}